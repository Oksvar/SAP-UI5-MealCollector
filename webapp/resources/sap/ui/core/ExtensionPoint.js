/*!
 * OpenUI5
 * (c) Copyright 2009-2024 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/base/future","sap/base/Log","sap/ui/core/mvc/View","sap/ui/core/Component"],function(e,n,i,o){"use strict";sap.ui.extensionpoint=function(e,i,o,a,r){n.warning("Do not use deprecated factory function 'sap.ui.extensionpoint'. Use 'sap.ui.core.ExtensionPoint.load' instead","sap.ui.extensionpoint",null,function(){return{type:"sap.ui.extensionpoint",name:i}});return t._factory(e,i,o,a,r)};let t={};(()=>{t=sap.ui.extensionpoint})();t._factory=function(a,r,s,u,f,c){var l,g,d,m;if(a){if(a.isA("sap.ui.core.mvc.View")){m=a.sViewName;g=a}else if(a.isA("sap.ui.core.Fragment")){m=a.getFragmentName();g=a._oContainingView}l=o.getCustomizing(a,{type:"sap.ui.viewExtensions",name:m,extensionName:r})}if(l){if(l.className){n.info("Customizing: View extension found for extension point '"+r+"' in View '"+g.sViewName+"': "+l.className+": "+(l.viewName||l.fragmentName));var p=g&&l.id?g.createId(l.id):l.id;var w={async:c,id:p,type:l.type};if(c&&g._sProcessingMode){w.processingMode=g._sProcessingMode}if(l.className==="sap.ui.core.Fragment"){var v=sap.ui.require("sap/ui/core/Fragment");w.fragmentName=l.fragmentName;w.containingView=g;if(c){if(v){d=v.load(w)}else{d=new Promise(function(e,n){sap.ui.require(["sap/ui/core/Fragment"],function(n){e(n.load(w))},n)})}}else{v=v||sap.ui.requireSync("sap/ui/core/Fragment");var x=new v(w);d=Array.isArray(x)?x:[x]}}else if(l.className==="sap.ui.core.mvc.View"){w.viewName=l.viewName;var N=i._create(w);if(c){d=N.loaded()}else{d=[N]}}else{e.warningThrows("Customizing: Unknown extension className configured (and ignored) in Component.js for extension point '"+r+"' in View '"+g.sViewName+"': "+l.className)}}else{e.warningThrows("Customizing: no extension className configured in Component.js for extension point '"+r+"' in View '"+g.sViewName+"': "+l.className)}}else if(t._fnExtensionProvider){var y=t._fnExtensionProvider(g);var _;if(g.isA("sap.ui.core.Fragment")){_=g._sExplicitId;var C=g.getController();g=C&&typeof C.isA==="function"&&C.isA("sap.ui.core.mvc.Controller")&&C.getView();if(g){_=g.getLocalId(_)||_}}if(y){if(!g){e.warningThrows("View instance could not be passed to ExtensionPoint Provider for extension point '"+r+"' "+"in fragment '"+_+"'.")}return[{providerClass:y,view:g,fragmentId:_,name:r,createDefault:s,targetControl:undefined,aggregationName:undefined,index:undefined,ready:function(e){var n=this._nextSibling;while(n!=null){n.index+=e.length;n=n._nextSibling}this._aControls=e},_aControls:[],_isExtensionPoint:true,_nextSibling:null}]}}if(!d&&typeof s==="function"){d=s()}var V=function(n){if(n&&!Array.isArray(n)){n=[n]}if(n&&u){var i=u.getMetadata().getAggregation(f);if(i){for(var o=0,t=n.length;o<t;o++){u[i._sMutator](n[o])}}else{e.errorThrows("Creating extension point failed - Tried to add extension point with name "+r+" to an aggregation of "+u.getId()+" in view "+g.sViewName+", but sAggregationName was not provided correctly and I could not find a default aggregation")}}return n||[]};if(d&&typeof d.then==="function"){return d.then(V)}else{return V(d)}};t.registerExtensionProvider=function(n){if(n==null){delete t._fnExtensionProvider}else if(typeof n=="function"){t._fnExtensionProvider=n}else{e.errorThrows("ExtensionPoint provider must be a function!")}};t.load=function(e){return Promise.resolve(t._factory(e.container,e.name,e.createDefaultContent,null,null,!!e.async))};return t});
//# sourceMappingURL=ExtensionPoint.js.map