/*!
* OpenUI5
 * (c) Copyright 2009-2024 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
*/
sap.ui.define(["./library","sap/ui/core/Control","./MessageStripUtilities","./Text","./Link","./FormattedText","sap/ui/core/ControlBehavior","sap/ui/core/Lib","sap/ui/core/library","./MessageStripRenderer","sap/base/Log","sap/m/Button","sap/ui/core/Configuration","sap/ui/core/InvisibleText"],function(e,t,i,o,s,a,n,r,l,p,g,u,d,c){"use strict";var f=l.MessageType;var y=e.ButtonType;var T=t.extend("sap.m.MessageStrip",{metadata:{library:"sap.m",designtime:"sap/m/designtime/MessageStrip.designtime",properties:{text:{type:"string",group:"Appearance",defaultValue:""},type:{type:"sap.ui.core.MessageType",group:"Appearance",defaultValue:f.Information},customIcon:{type:"sap.ui.core.URI",group:"Appearance",defaultValue:""},showIcon:{type:"boolean",group:"Appearance",defaultValue:false},showCloseButton:{type:"boolean",group:"Appearance",defaultValue:false},enableFormattedText:{type:"boolean",group:"Appearance",defaultValue:false}},defaultAggregation:"link",aggregations:{link:{type:"sap.m.Link",multiple:false,singularName:"link"},_formattedText:{type:"sap.m.FormattedText",multiple:false,visibility:"hidden"},_text:{type:"sap.m.Text",multiple:false,visibility:"hidden"},_closeButton:{type:"sap.m.Button",multiple:false,visibility:"hidden"}},events:{close:{}},dnd:{draggable:true,droppable:false}},renderer:p});T.prototype.init=function(){this.data("sap-ui-fastnavgroup","true",true);this.setAggregation("_text",new o);this._initCloseButton()};T.prototype.onBeforeRendering=function(){this._normalizeType(this.getType());this._setButtonAriaLabelledBy(this.getType())};T.prototype.setText=function(e){var t=this.getAggregation("_formattedText");if(t){t.setHtmlText(e)}this.getAggregation("_text").setText(e);return this.setProperty("text",e)};T.prototype.close=function(){var e=n.getAnimationMode(),t=e!==d.AnimationMode.none&&e!==d.AnimationMode.minimal;var o=function(){this.setVisible(false);this.fireClose()}.bind(this);if(!t){o();return}i.closeTransitionWithCSS.call(this,o)};T.prototype.setEnableFormattedText=function(e){var t=this.getAggregation("_formattedText");if(e){if(!t){t=new a;t._setUseLimitedRenderingRules(true);this.setAggregation("_formattedText",t)}t.setHtmlText(this.getText())}return this.setProperty("enableFormattedText",e)};T.prototype.setAggregation=function(e,i,o){if(e==="link"&&i instanceof s){var a=this.getId()+"-info"+" "+this.getAggregation("_text").getId(),n=i.getAriaDescribedBy();if(!n.includes(a)){i.addAriaDescribedBy(a)}}t.prototype.setAggregation.call(this,e,i,o);return this};p.getAccessibilityState=function(){var e=i.getAccessibilityState.call(this),t=this.getLink(),o=r.getResourceBundleFor("sap.m");if(!t){e.labelledby=this.getId()}e.roledescription=o.getText("MESSAGE_STRIP_ARIA_ROLE_DESCRIPTION");return e};T.prototype.ontouchmove=function(e){e.setMarked()};T.prototype._normalizeType=function(e){if(e===f.None){g.warning(i.MESSAGES.TYPE_NOT_SUPPORTED);this.setProperty("type",f.Information,true)}};T.prototype._initCloseButton=function(){var e=r.getResourceBundleFor("sap.m"),t=this.getAggregation("_closeButton");if(!t){var o=new u({type:y.Transparent,tooltip:e.getText("MESSAGE_STRIP_TITLE"),icon:"sap-icon://decline",press:this.close.bind(this)}).addStyleClass(i.CLASSES.CLOSE_BUTTON).addStyleClass("sapUiSizeCompact");this.setAggregation("_closeButton",o);this._setButtonAriaLabelledBy(this.getType())}};T.prototype._setButtonAriaLabelledBy=function(e){var t=this.getAggregation("_closeButton"),i=r.getResourceBundleFor("sap.m"),o=i.getText("MESSAGE_STRIP_"+e.toUpperCase()+"_CLOSE_BUTTON");if(!this._oInvisibleText){this._oInvisibleText=new c({text:o}).toStatic()}else{this._oInvisibleText.setText(o)}if(t){t.removeAllAssociation("ariaLabelledBy",true);t.addAssociation("ariaLabelledBy",this._oInvisibleText.getId(),true)}};T.prototype.exit=function(){if(this._oInvisibleText){this._oInvisibleText.destroy();this._oInvisibleText=null}};return T});
//# sourceMappingURL=MessageStrip.js.map